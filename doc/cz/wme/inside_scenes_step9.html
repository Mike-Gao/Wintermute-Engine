<html>

<head>
<meta http-equiv="Content-Language" content="cs">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<title>Krok 9: Rùzné tipy a postupy</title>
<link rel="stylesheet" type="text/css" href="../styles.css">
</head>

<body>

<h3>Krok 9: Rùzné tipy a postupy</h3>

<p>Jelikož už je naše scéna kompletní, mùžeme se nyní podívat na nìkteré
další postupy, které budete patrnì potøebovat pøi vytváøení vaší hry.</p>

<p>&nbsp;</p>

<p><b>Stavy scény (scene states)</b></p>

<p>Herní engine je schopen automaticky uchovávat stavy objektù ve scénì a
obnovit je poté, kdy hráè scénu opakovanì navštíví. Tuto funkci je možno
zapnout v oknì vlastnosí scény ve SceneEditu (panel vlevo, záložka
Properties). Také zde mùžete zvolit, zda si mají entity ve scénì
pamatovat, jaký mìli naposled pøiøazen sprite, abyste toto nemuseli ruènì
skriptovat.</p>

<p align="center">
<img border="0" src="../img/tut9-1.gif" width="224" height="446"></p>
<p>Poznámka: automatické uchovávání stavu scény využívá názvù objektù.
To znamená, že byste ve scénì nemìli mít dva prvky se stejným názvem,
jinak se mùžete doèkat nežádoucích výsedkù.</p>
<p>&nbsp;</p>
<p><b>Pøechod do jiné scény</b></p>
<p>Vaše hra se pravdìpodobnì nebude celá odehrávat v jedné scénì. Už víte,
jak scény vytváøet, ale jak je navzájem propojit? Zpùsobù jak ve høe mùže
dojít k pøechodu do jiné scény, mùže být celá øada, a proto pro tuto
funci WME používá skriptování. Zkusme si to. V <a href="inside_scenes_step7.html">kroku
7</a>  už jsme uèinili dveøe interaktivním objektem. Vlevo v seznamu prvkù
scény vyberte entitu &quot;door&quot; (dveøe) a kliknìte na tlaèítko
&quot;Scripts...&quot; (skripty). Jelikož dveøe doposud nemìly žádný
skript pøiøazen, SceneEdit nám nabídne vytvoøení nového skriptu ze šablony.
Vyberte šablonu &quot;scene object&quot; a stisknìte OK. Tím bude vytvoøen
nový skript &quot;door.script&quot;. Objeví se okno se seznamem skriptù.
Double-clicknìte na položce &quot;door.script&quot; nebo stisknìte tlaèítko
&quot;Edit script&quot; (upravit skript) na panelu nástrojù.</p>
<p align="center">
<img border="0" src="../img/tut9-2.gif" width="329" height="260"></p>
<p align="left">Skript bude otevøen v textovém editoru. Jak vydíte, skript už
obsahuje øadu pøeddefinovaných obsluh událostí. My ovšem chceme, aby dveøe
reagovaly pouze na kliknutí levým tlaèítkem myši. Smažte všechny bloky
obsluhy událostí, mùžete nechat jen funkci &quot;GoToObject&quot;. Pozdìji
mùžete zmìnit koordináty v této funkci, tak aby postava došla ke dveøím
(to už jsme se nauèili v <a href="inside_scenes_step7.html">kroku 7</a>).</p>
<p align="left">Nyní už jen potøebujeme pøidat obsluhu kliknutí levým tlaèítkem
myši, která zajistí, že postava dojde ke dveøím a hra se pøepne do jiné
scény. Pøidejte do skriptu následující kousek kódu:</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">
  <tr>
    <td class="code">
<pre>on &quot;LeftClick&quot;
{
  GoToObject();
  Game.ChangeScene(&quot;scenes\menu\menu.scene&quot;);
}
</pre>    
    </td>
  </tr>
</table>
<p align="left">První øádek zavolá funkci GoToObject, která zajistí, že
postava dojde ke dveøí. Druhý øádek øíká høe, že má nahrát novou scénu
(change scene = zmìnit scénu), jmenovitì to bude scéna, uložená v souboru
&quot;scenes\menu\menu.scene&quot;. Samozøejmì, mùžete použít cestu k jakékoliv
scénì, kterou už máte v projektu vytvoøenu.</p>

<p align="left">V projektu <b>WME demo</b> mùžete vidìt ukázku pøechodu
mezi dvìma scénami.</p>

<p align="left">&nbsp;</p>

<p align="left"><b>Nastavování &quot;Walk to&quot; (jdi k) bodù a smìru</b></p>

<p align="left">V minulých kapitolách této výuky jsme ve skriptech používali
funkci &quot;GoToObject&quot;, která zajistila, že postava dojde k nìjakému
objektu ve scénì. Nyní existuje snazší zpùsob; mùžete interaktivnì
nastavit cílovou pozici postavy pro jednotlivé objekty ve scénì a to pøímo
ve SceneEditu.</p>

<p align="left">Zkusme si to právì na objektu dveøe. Vlevo v seznamu prvkù
vyberte položku &quot;door&quot; (dveøe) a podívejte se na okno s vlastnostmi
entity:</p>

<p align="center">
<img border="0" src="../img/tut9-3.gif" width="259" height="245"></p>

<p align="left">Zde mùžete buïto ruène vyplnit cílovou pozici a natoèení
postavy, a nebo - lépe - použijde <b>nástroj pro umístìní postavy</b>
(popsán v <a href="inside_scenes_step6.html#actor_placement">kroku 6</a>). To
udìláte tak, že umístíte postavu do scény v požadovaném místì a natoèení
a potom kliknete na tlaèítko &quot;&lt;&quot;, které pøenese aktuální
pozici postavy do okna vlastností.</p>

<p align="left">Ve skriptu pak už staèí zavolat metodu <b>actor.GoToObect</b>
(actor=postava, GoToObject=jdi k objektu) a postava dojde na toto místo. Napøíklad
skript &quot;door.script&quot;, který jsme pøed chvílí vytvoøili, pak bude
vypadat takto:</p>

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber3">
  <tr>
    <td class="code">
<pre>on &quot;LeftClick&quot;
{
  actor.GoToObject(this);
  Game.ChangeScene(&quot;scenes\menu\menu.scene&quot;);
}
</pre>    
    </td>
  </tr>
</table>

<p align="left">Jelikož je skript pøipojen k objektu &quot;dveøe&quot;,
standardní promìnná s názvem &quot;this&quot; se odkazuje pøímo na dveøe.
Jinými slovy, první øádek øíká postavì, aby &quot;došla ke dveøím&quot;.
Postava pøitom použije cílový bod, který jsme pro dveøe nastavili ve
SceneEditu.</p>

</body>

</html>